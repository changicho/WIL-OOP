# 의존 (dependency)

> 기능 구현을 위해 다른 구성 요소를 사용하는 것

의존의 예시

- 객체 생성
- 메소드 호출
- 데이터 사용

의존은 변경이 전파될 수 있는 가능성이다.

의존하는 대상이 바뀌면 자신이 바뀔 가능성이 높아진다.

- 패러미터 변경
- exception 타입 추가

따라서 의존하는 대상은 적을수록 좋다.

## 순환 의존

순환 의존의 경우 **변경 연쇄 전파**가능성이 존재한다.

class, package, module 수준에서 순환 의존은 절대 발생하지 않도록 해야한다.

만약 의존하는 대상이 많은 경우는 다음과 같을 수 있다.

### 기능을 분리

각 기능마다 의존하는 대상이 다를 수 있다.

하나의 기능 변경이 다른 기능에 영향을 줄 수 있다.

따라서 기능 별로 분리하는 것을 고려해 볼 수 있다.

```javascript
class Service {
  register() {
    /*...*/
  }
  change() {
    /*...*/
  }
  block() {
    /*...*/
  }
}
```

```javascript
class RegisterService {
  register() {
    /*...*/
  }
}

class ChangeService {
  change() {
    /*...*/
  }
}

class BlockService {
  block() {
    /*...*/
  }
}
```

### 단일 기능으로 묶어보기

몇 가지 의존 대상을 단일 기능으로 묶어서 생각하면 의존 대상을 줄일 수 있다.

의존 대상 객체를 직접 생성할 경우에는

생성 클래스가 바뀌면 의존하는 코드도 바뀐다.

의존 대상 객체를 직접 생성하지 않는 방법은 몇가지 방법이 이싿.

- 팩토리, 빌더
- 의존 주입 (Dependency Injection)
- 서비스 로케이터 (Service Locator)
